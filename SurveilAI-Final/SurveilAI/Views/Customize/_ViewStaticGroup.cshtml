@model SurveilAI.Models.pvgroup

@{


}

<div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Delete Event</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>


            </div>
            <div class="modal-body">
                Are you sure want to delete group ?
                <form id="DeleteForm" action="DeleteEvent" method="post">
                    <div class="row">
                        <div class="col-md-6 form-group">
                            <label>Group Name</label>

                            @Html.TextBox("groupname", Model.groupname, new { autocomplete = "off", placeholder = "", @class = "form-control", @readonly = "true" })

                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" onclick="RuleDelete('@Model.groupid')" form="DeleteForm" name="submitButton" value="Delete">Delete</button>
            </div>
        </div>
    </div>
</div>
<div class="card">

    <div class="container" style="margin:50px 0px;">
        <div class="stepwizard">
            <div class="stepwizard-row setup-panel">
                <div class="stepwizard-step">
                    <a href="#step-1" id="RD" type="button" class="btn btn-primary btn-circle" style="color:#bbb !important;">1</a>
                    <p><small>Group Details</small></p>
                </div>
                <div class="stepwizard-step">
                    <a href="#step-2" id="Res" type="button" class="btn btn-default btn-circle" disabled="disabled">2</a>
                    <p><small>Resource</small></p>
                </div>
            </div>
        </div>
        @using (Html.BeginForm("StaticDevGrpPost", "Customize", FormMethod.Post, new { id = "target" }))
        {
            @Html.AntiForgeryToken()
            <div class="panel panel-primary setup-content" id="step-1">
                <div class="panel-heading">
                    <h3 class="panel-title">Enter General Group Data.</h3>
                </div>
                <div class="panel-body">
                    <!--<div class="mb-3">
                        <label class="control-label">Group ID</label>
                        @*@Html.TextBox("groupid", null, new { placeholder = "Enter Group ID (Only Numeric) ", @class = "form-control" })*@
                        @*<small style="font-size:100% !important; color:forestgreen !important;" class="form-text text-muted">@TempData["OKMsg"]</small>*@
                        <small id="gid" style="color:red !important;display:none" class="form-text text-muted">Required</small>
                    </div>-->
                    <div class="mb-3">
                        @Html.Hidden("PostType", "Edit")
                        @Html.Hidden("groupid")
                        <label class="control-label">Group Name</label>
                        @Html.TextBox("groupname", null, new { placeholder = "Enter Group Name", id = "groupName", @class = "form-control", maxlength = "16" })
                        <small id="gname" style="color:red !important;display:none" class="form-text text-muted">Required</small>
                    </div>
                    <div class="mb-3">
                        <label class="control-label">Description</label>
                        @Html.TextBox("description", null, new { placeholder = "Enter Group Description", id = "description", maxlength = "255", @class = "form-control" })
                    </div>
                    <div class="row">
                        <div class="col-md-2" style="text-align: center;margin-top: 11%;">
                            <div class="col">
                                <label class="control-label">Contact 1:</label>
                            </div>
                        </div>
                        <div class="col-md-10">
                            <div class="row">
                                <div class="col-md-1" style="padding: 40px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("gg", "two", false, new { id = "EM", @class = "custom-control-input", @onclick = "SwitchInput(\"EmCon1\")" })
                                        <label class="custom-control-label" for="EM"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray;">
                                    <div class="mb-3" id="EmCon1">
                                        <label class="control-label">E-mail Address: Separated by semicolon(;)</label>
                                        @Html.TextArea("contactid1", null, new { placeholder = "Enter e-mail Addresses [1000 character limit]", @class = "form-control contacts", maxlength = "1000" })
                                        <small id="C" style="color:red !important;display:none" class="form-text text-muted"></small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-1" style="padding: 30px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("gg", "three", false, new { id = "AC", @class = "custom-control-input", @onclick = "SwitchInput(\"AnCon1\")" })
                                        <label class="custom-control-label" for="AC"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray; border-top: 0;">
                                    <div class="mb-3" id="AnCon1">
                                        <label class="control-label">Any Contact</label>
                                        @Html.DropDownList("Contact11", (IEnumerable<SelectListItem>)ViewBag.L1, new { @class = "form-control col-md-12" })

                                        @*@Html.DropDownList("AnyCont", new SelectList((System.Collections.IEnumerable)ViewData["Contact"], "id", "Name"))*@
                                        @*@Html.DropDownList("AnyCont",ViewBag.contactList as SelectList,  new { @class = "form-control"} )*@
                                    </div>
                                </div>
                            </div>
                            <input class="form-control" id="contactid1" name="contactid1" type="hidden" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2" style="text-align: center;margin-top: 11%;">
                            <div class="col">
                                <label class="control-label">Contact 2:</label>
                            </div>
                        </div>
                        <div class="col-md-10">
                            <div class="row">
                                <div class="col-md-1" style="padding: 40px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("pp", "two", false, new { id = "EM1", @class = "custom-control-input", @onclick = "SwitchInput(\"EmCon2\")" })
                                        <label class="custom-control-label" for="EM1"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray;">
                                    <div class="mb-3" id="EmCon2">
                                        <label class="control-label">E-mail Address: Separated by semicolon(;)</label>
                                        @Html.TextArea("contactid2", null, new { placeholder = "Enter e-mail Addresses [1000 character limit]", @class = "form-control contacts", maxlength = "1000" })
                                        <small id="c1" style="color:red !important;display:none" class="form-text text-muted"></small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-1" style="padding: 30px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("pp", "three", false, new { id = "AC1", @class = "custom-control-input", @onclick = "SwitchInput(\"AnCon2\")" })
                                        <label class="custom-control-label" for="AC1"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray; border-top: 0;">
                                    <div class="mb-3" id="AnCon2">
                                        <label class="control-label">Any Contact</label>
                                        @Html.DropDownList("Contact21", (IEnumerable<SelectListItem>)ViewData["L2"], new { @class = "form-control col-md-12" })
                                    </div>
                                </div>
                            </div>
                            <input class="form-control" id="contactid2" name="contactid2" type="hidden" value="">
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-2" style="text-align: center;margin-top: 11%;">
                            <div class="col">
                                <label class="control-label">Contact 3:</label>
                            </div>
                        </div>
                        <div class="col-md-10">
                            <div class="row">
                                <div class="col-md-1" style="padding: 40px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("ll", "two", false, new { id = "EM2", @class = "custom-control-input", @onclick = "SwitchInput(\"EmCon3\")" })
                                        <label class="custom-control-label" for="EM2"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray;">
                                    <div class="mb-3" id="EmCon3">
                                        <label class="control-label">E-mail Address: Separated by semicolon(;)</label>
                                        @Html.TextArea("contactid3", null, new { placeholder = "Enter e-mail Addresses [1000 character limit]", @class = "form-control contacts", maxlength = "1000" })
                                        <small id="C2" style="color:red !important;display:none" class="form-text text-muted"></small>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-1" style="padding: 30px 0; text-align: center;">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        @Html.RadioButton("ll", "three", false, new { id = "AC2", @class = "custom-control-input", @onclick = "SwitchInput(\"AnCon3\")" })
                                        <label class="custom-control-label" for="AC2"></label>
                                    </div>
                                </div>
                                <div class="col-md-10" style="border: 1px solid lightgray; border-top: 0;">
                                    <div class="mb-3" id="AnCon3">
                                        <label class="control-label">Any Contact</label>
                                        @Html.DropDownList("Contact31", (IEnumerable<SelectListItem>)ViewData["L3"], new { @class = "form-control col-md-12" })
                                    </div>
                                </div>
                            </div>
                            <input class="form-control" id="contactid3" name="contactid3" type="hidden" value="">
                        </div>
                    </div>
                </div>
                <br />
                <br />
                <button class="btn btn-primary nextBtn" @*onclick="Contact();"*@ style="float:right;" type="button">Next</button>
            </div>

            <div class="panel panel-primary setup-content" id="step-2">
                <div class="panel-heading">
                    <h3 class="panel-title">Select Resource.</h3>
                </div>
                <div class="panel-body">
                    <div>
                        <div class="card-body">
                            <div class="mb-3 row container-fluid">
                                @Html.ValidationMessage("Resources", new { id = "Resources", @class = "text-danger" })
                                <hr class="col-md-12" />
                                <div class="col-md-12">
                                    <div class="row">
                                        <h5 class="card-header col-md-8">Resource Selection</h5>
                                        <div style="max-height:400px; min-height:400px; overflow-y:scroll;">
                                            @{
                                                var obj = new SurveilAI.DataContext.ResourceViewModel();
                                                obj.devices = Model.criteria;
                                                obj.devicesheir = Model.DeviceList.Select(x => x.DeviceID).ToList();
                                                obj.Hierar = Model.HierarchyList;
                                            }
                                            @Html.Partial("_Resources", obj)
                                        </div>
                                        <input class="form-control" id="criteria" name="criteria" type="hidden" value="">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-success" style="float:right;" type="submit">Finish</button>
                </div>
            </div>
        }
    </div>
</div>
<input type="hidden" value="@Model.Contact11" id="c-11" />
<input type="hidden" value="@Model.Contact21" id="c-21" />
<input type="hidden" value="@Model.Contact31" id="c-31" />

<script src="~/assets/vendor/jquery-steps/jquery.steps.min.js"></script>
<script src="~/assets/vendor/jquery-validation/jquery.validate.min.js"></script>
<script src="~/assets/js/global/ForRule.js"></script>
<script src="~/assets/js/global/ForDeviceGroup.js"></script>
<script>
    $(document).ready(function () {
        var cn11 = $('#c-11').val();
        var cn21 = $('#c-21').val();
        var cn31 = $('#c-31').val();



        cn11 =cn11.trim();
        cn21 =cn21.trim();
        cn31 = cn31.trim();
        if (cn11 != "") {
            $("#Contact11").val(cn11);

        }
        if (cn21 != "") {
            $("#Contact21").val(cn21);
        }
        if (cn31 != "") {
            $("#Contact31").val(cn31);
        }
    });
    function RuleDelete(id) {
         $.ajax({
             url: "@Url.Action("GrpDevDel", "Customize")",
             data: { gt: id },
            type: "Get",
            dataType: "html",
            success: function (data) {
                if (data == "error") {
                    var url = '@Url.Action("GroupDevice", "Customize")';
                    window.location.href = url;
                }
                else {
                    var url = '@Url.Action("GroupDevice", "Customize")';
                    window.location.href = url;
                }
            },
            error: function (data) {
                alert("Error");
            }
         })
        }

</script>

